{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useState, useRef } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport { Camera, CameraType } from \"expo-camera\";\nimport { useDispatch } from 'react-redux';\nimport { setPhotoForCreateGroupOrChannel } from \"../../../../../../ReducersAndActions/Actions/ChatListActions/ChatListActions\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar CameraComponent = function CameraComponent(_ref) {\n  var navigation = _ref.navigation,\n    route = _ref.route;\n  var _useState = useState(null),\n    _useState2 = _slicedToArray(_useState, 2),\n    hasPermission = _useState2[0],\n    setHasPermission = _useState2[1];\n  var _useState3 = useState(CameraType.back),\n    _useState4 = _slicedToArray(_useState3, 2),\n    type = _useState4[0],\n    setType = _useState4[1];\n  var cameraRef = useRef(null);\n  var dispatch = useDispatch();\n  var flipCamera = function flipCamera() {\n    setType(type === CameraType.back ? CameraType.front : CameraType.back);\n  };\n  var handleTakePhoto = function () {\n    var _ref2 = _asyncToGenerator(function* () {\n      if (cameraRef.current) {\n        var photo = yield cameraRef.current.takePictureAsync();\n        dispatch(setPhotoForCreateGroupOrChannel(photo.uri));\n        route.params.setOnAddPhotoPress(false);\n        navigation.goBack();\n      }\n    });\n    return function handleTakePhoto() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  return _jsx(Camera, {\n    style: {\n      flex: 1\n    },\n    type: type,\n    ref: cameraRef,\n    children: _jsxs(View, {\n      style: {\n        flex: 1,\n        backgroundColor: 'transparent',\n        flexDirection: 'row',\n        justifyContent: 'space-between',\n        margin: 20\n      },\n      children: [_jsx(TouchableOpacity, {\n        style: {\n          alignSelf: 'flex-end',\n          alignItems: 'center'\n        },\n        onPress: flipCamera,\n        children: _jsx(Text, {\n          style: {\n            fontSize: 18,\n            marginBottom: 10,\n            color: 'white'\n          },\n          children: \"Flip\"\n        })\n      }), _jsx(TouchableOpacity, {\n        style: {\n          alignSelf: 'flex-end',\n          alignItems: 'center'\n        },\n        onPress: handleTakePhoto,\n        children: _jsx(Text, {\n          style: {\n            fontSize: 18,\n            marginBottom: 10,\n            color: 'white'\n          },\n          children: \"Take Photo\"\n        })\n      })]\n    })\n  });\n};\nexport default CameraComponent;","map":{"version":3,"names":["React","useState","useRef","View","Text","TouchableOpacity","Camera","CameraType","useDispatch","setPhotoForCreateGroupOrChannel","jsx","_jsx","jsxs","_jsxs","CameraComponent","_ref","navigation","route","_useState","_useState2","_slicedToArray","hasPermission","setHasPermission","_useState3","back","_useState4","type","setType","cameraRef","dispatch","flipCamera","front","handleTakePhoto","_ref2","_asyncToGenerator","current","photo","takePictureAsync","uri","params","setOnAddPhotoPress","goBack","apply","arguments","style","flex","ref","children","backgroundColor","flexDirection","justifyContent","margin","alignSelf","alignItems","onPress","fontSize","marginBottom","color"],"sources":["D:/project/1project/Messenger/Messenger/Pages/ChatList/Components/CreateChannelAndGroupOrWriteMessage/GalleryModalWindow/Camera/CameraComponent.tsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport { View, Text, TouchableOpacity } from 'react-native';\r\nimport { Camera, CameraType } from \"expo-camera\";\r\nimport { useDispatch } from 'react-redux';\r\nimport { setPhotoForCreateGroupOrChannel } from '../../../../../../ReducersAndActions/Actions/ChatListActions/ChatListActions';\r\n\r\ninterface CameraProps {\r\n  navigation:any;\r\n  route:any;\r\n}\r\n\r\nconst CameraComponent: React.FC<CameraProps> = ({navigation,route}) => {\r\n  const [hasPermission, setHasPermission] = useState<boolean | null>(null);\r\n  const [type, setType] = useState(CameraType.back);\r\n  const cameraRef = useRef<Camera | null>(null);\r\n\r\n  const dispatch=useDispatch();\r\n  const flipCamera = () => {\r\n    setType(\r\n      type === CameraType.back\r\n        ? CameraType.front\r\n        : CameraType.back\r\n    );\r\n  };\r\n  const handleTakePhoto = async () => {\r\n    if (cameraRef.current) {\r\n      const photo = await cameraRef.current.takePictureAsync();\r\n      dispatch(setPhotoForCreateGroupOrChannel(photo.uri));\r\n      route.params.setOnAddPhotoPress(false);\r\n      navigation.goBack();\r\n    }\r\n  };\r\n\r\n  return (\r\n   \r\n      <Camera style={{ flex: 1 }} type={type} ref={cameraRef}>\r\n        <View\r\n          style={{\r\n            flex: 1,\r\n            backgroundColor: 'transparent',\r\n            flexDirection: 'row',\r\n            justifyContent: 'space-between',\r\n            margin: 20,\r\n          }}\r\n        >\r\n          <TouchableOpacity\r\n            style={{\r\n              alignSelf: 'flex-end',\r\n              alignItems: 'center',\r\n            }}\r\n            onPress={flipCamera}\r\n          >\r\n            <Text style={{ fontSize: 18, marginBottom: 10, color: 'white' }}>Flip</Text>\r\n          </TouchableOpacity>\r\n          <TouchableOpacity\r\n            style={{\r\n              alignSelf: 'flex-end',\r\n              alignItems: 'center',\r\n            }}\r\n            onPress={handleTakePhoto}\r\n          >\r\n            <Text style={{ fontSize: 18, marginBottom: 10, color: 'white' }}>Take Photo</Text>\r\n          </TouchableOpacity>\r\n        </View>\r\n      </Camera>\r\n    \r\n  );\r\n};\r\n\r\nexport default CameraComponent;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}