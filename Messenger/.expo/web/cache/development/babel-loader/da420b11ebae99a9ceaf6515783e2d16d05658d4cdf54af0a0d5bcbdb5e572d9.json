{"ast":null,"code":"\"use strict\";\n\nvar _defineProperty = require(\"@babel/runtime/helpers/defineProperty\");\nvar _reactJsxRuntime = require(\"react/jsx-runtime\");\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nvar __extends = this && this.__extends || function () {\n  var extendStatics = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (d, b) {\n    d.__proto__ = b;\n  } || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n  };\n  return function (d, b) {\n    extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __assign = this && this.__assign || Object.assign || function (t) {\n  for (var s, i = 1, n = arguments.length; i < n; i++) {\n    s = arguments[i];\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n  }\n  return t;\n};\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0) t[p[i]] = s[p[i]];\n  return t;\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar React = require(\"react\");\nvar react_native_1 = require(\"react-native-web/dist/index\");\nvar react_native_image_pan_zoom_1 = require(\"react-native-image-pan-zoom\");\nvar image_viewer_style_1 = require(\"./image-viewer.style\");\nvar image_viewer_type_1 = require(\"./image-viewer.type\");\nvar ImageViewer = function (_super) {\n  __extends(ImageViewer, _super);\n  function ImageViewer() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.state = new image_viewer_type_1.State();\n    _this.fadeAnim = new react_native_1.Animated.Value(0);\n    _this.standardPositionX = 0;\n    _this.positionXNumber = 0;\n    _this.positionX = new react_native_1.Animated.Value(0);\n    _this.width = 0;\n    _this.height = 0;\n    _this.styles = image_viewer_style_1.default(0, 0, 'transparent');\n    _this.hasLayout = false;\n    _this.loadedIndex = new Map();\n    _this.handleLongPressWithIndex = new Map();\n    _this.imageRefs = [];\n    _this.resetImageByIndex = function (index) {\n      _this.imageRefs[index] && _this.imageRefs[index].reset();\n    };\n    _this.preloadImage = function (index) {\n      if (index < _this.state.imageSizes.length) {\n        _this.loadImage(index + 1);\n      }\n    };\n    _this.handleHorizontalOuterRangeOffset = function (offsetX) {\n      if (offsetX === void 0) {\n        offsetX = 0;\n      }\n      _this.positionXNumber = _this.standardPositionX + offsetX;\n      _this.positionX.setValue(_this.positionXNumber);\n      var offsetXRTL = !react_native_1.I18nManager.isRTL ? offsetX : -offsetX;\n      if (offsetXRTL < 0) {\n        if (_this.state.currentShowIndex || 0 < _this.props.imageUrls.length - 1) {\n          _this.loadImage((_this.state.currentShowIndex || 0) + 1);\n        }\n      } else if (offsetXRTL > 0) {\n        if (_this.state.currentShowIndex || 0 > 0) {\n          _this.loadImage((_this.state.currentShowIndex || 0) - 1);\n        }\n      }\n    };\n    _this.handleResponderRelease = function (vx) {\n      if (vx === void 0) {\n        vx = 0;\n      }\n      var vxRTL = react_native_1.I18nManager.isRTL ? -vx : vx;\n      var isLeftMove = react_native_1.I18nManager.isRTL ? _this.positionXNumber - _this.standardPositionX < -(_this.props.flipThreshold || 0) : _this.positionXNumber - _this.standardPositionX > (_this.props.flipThreshold || 0);\n      var isRightMove = react_native_1.I18nManager.isRTL ? _this.positionXNumber - _this.standardPositionX > (_this.props.flipThreshold || 0) : _this.positionXNumber - _this.standardPositionX < -(_this.props.flipThreshold || 0);\n      if (vxRTL > 0.7) {\n        _this.goBack.call(_this);\n        if (_this.state.currentShowIndex || 0 > 0) {\n          _this.loadImage((_this.state.currentShowIndex || 0) - 1);\n        }\n        return;\n      } else if (vxRTL < -0.7) {\n        _this.goNext.call(_this);\n        if (_this.state.currentShowIndex || 0 < _this.props.imageUrls.length - 1) {\n          _this.loadImage((_this.state.currentShowIndex || 0) + 1);\n        }\n        return;\n      }\n      if (isLeftMove) {\n        _this.goBack.call(_this);\n      } else if (isRightMove) {\n        _this.goNext.call(_this);\n        return;\n      } else {\n        _this.resetPosition.call(_this);\n        return;\n      }\n    };\n    _this.goBack = function () {\n      if (_this.state.currentShowIndex === 0) {\n        _this.resetPosition.call(_this);\n        return;\n      }\n      _this.positionXNumber = !react_native_1.I18nManager.isRTL ? _this.standardPositionX + _this.width : _this.standardPositionX - _this.width;\n      _this.standardPositionX = _this.positionXNumber;\n      react_native_1.Animated.timing(_this.positionX, {\n        toValue: _this.positionXNumber,\n        duration: _this.props.pageAnimateTime,\n        useNativeDriver: !!_this.props.useNativeDriver\n      }).start();\n      var nextIndex = (_this.state.currentShowIndex || 0) - 1;\n      _this.setState({\n        currentShowIndex: nextIndex\n      }, function () {\n        if (_this.props.onChange) {\n          _this.props.onChange(_this.state.currentShowIndex);\n        }\n      });\n    };\n    _this.goNext = function () {\n      if (_this.state.currentShowIndex === _this.props.imageUrls.length - 1) {\n        _this.resetPosition.call(_this);\n        return;\n      }\n      _this.positionXNumber = !react_native_1.I18nManager.isRTL ? _this.standardPositionX - _this.width : _this.standardPositionX + _this.width;\n      _this.standardPositionX = _this.positionXNumber;\n      react_native_1.Animated.timing(_this.positionX, {\n        toValue: _this.positionXNumber,\n        duration: _this.props.pageAnimateTime,\n        useNativeDriver: !!_this.props.useNativeDriver\n      }).start();\n      var nextIndex = (_this.state.currentShowIndex || 0) + 1;\n      _this.setState({\n        currentShowIndex: nextIndex\n      }, function () {\n        if (_this.props.onChange) {\n          _this.props.onChange(_this.state.currentShowIndex);\n        }\n      });\n    };\n    _this.handleLongPress = function (image) {\n      if (_this.props.saveToLocalByLongPress) {\n        _this.setState({\n          isShowMenu: true\n        });\n      }\n      if (_this.props.onLongPress) {\n        _this.props.onLongPress(image);\n      }\n    };\n    _this.handleClick = function () {\n      if (_this.props.onClick) {\n        _this.props.onClick(_this.handleCancel, _this.state.currentShowIndex);\n      }\n    };\n    _this.handleDoubleClick = function () {\n      if (_this.props.onDoubleClick) {\n        _this.props.onDoubleClick(_this.handleCancel);\n      }\n    };\n    _this.handleCancel = function () {\n      _this.hasLayout = false;\n      if (_this.props.onCancel) {\n        _this.props.onCancel();\n      }\n    };\n    _this.handleLayout = function (event) {\n      if (event.nativeEvent.layout.width !== _this.width) {\n        _this.hasLayout = true;\n        _this.width = event.nativeEvent.layout.width;\n        _this.height = event.nativeEvent.layout.height;\n        _this.styles = image_viewer_style_1.default(_this.width, _this.height, _this.props.backgroundColor || 'transparent');\n        _this.forceUpdate();\n        _this.jumpToCurrentImage();\n      }\n    };\n    _this.saveToLocal = function () {\n      if (!_this.props.onSave) {\n        react_native_1.CameraRoll.saveToCameraRoll(_this.props.imageUrls[_this.state.currentShowIndex || 0].url);\n        _this.props.onSaveToCamera(_this.state.currentShowIndex);\n      } else {\n        _this.props.onSave(_this.props.imageUrls[_this.state.currentShowIndex || 0].url);\n      }\n      _this.setState({\n        isShowMenu: false\n      });\n    };\n    _this.handleLeaveMenu = function () {\n      _this.setState({\n        isShowMenu: false\n      });\n    };\n    _this.handleSwipeDown = function () {\n      if (_this.props.onSwipeDown) {\n        _this.props.onSwipeDown();\n      }\n      _this.handleCancel();\n    };\n    return _this;\n  }\n  ImageViewer.prototype.componentDidMount = function () {\n    this.init(this.props);\n  };\n  ImageViewer.getDerivedStateFromProps = function (nextProps, prevState) {\n    if (nextProps.index !== prevState.prevIndexProp) {\n      return {\n        currentShowIndex: nextProps.index,\n        prevIndexProp: nextProps.index\n      };\n    }\n    return null;\n  };\n  ImageViewer.prototype.componentDidUpdate = function (prevProps, prevState) {\n    if (prevProps.index !== this.props.index) {\n      this.loadImage(this.props.index || 0);\n      this.jumpToCurrentImage();\n      react_native_1.Animated.timing(this.fadeAnim, {\n        toValue: 1,\n        duration: 200,\n        useNativeDriver: !!this.props.useNativeDriver\n      }).start();\n    }\n  };\n  ImageViewer.prototype.init = function (nextProps) {\n    var _this = this;\n    if (nextProps.imageUrls.length === 0) {\n      this.fadeAnim.setValue(0);\n      return this.setState(new image_viewer_type_1.State());\n    }\n    var imageSizes = [];\n    nextProps.imageUrls.forEach(function (imageUrl) {\n      imageSizes.push({\n        width: imageUrl.width || 0,\n        height: imageUrl.height || 0,\n        status: 'loading'\n      });\n    });\n    this.setState({\n      currentShowIndex: nextProps.index,\n      prevIndexProp: nextProps.index || 0,\n      imageSizes: imageSizes\n    }, function () {\n      _this.loadImage(nextProps.index || 0);\n      _this.jumpToCurrentImage();\n      react_native_1.Animated.timing(_this.fadeAnim, {\n        toValue: 1,\n        duration: 200,\n        useNativeDriver: !!nextProps.useNativeDriver\n      }).start();\n    });\n  };\n  ImageViewer.prototype.jumpToCurrentImage = function () {\n    this.positionXNumber = this.width * (this.state.currentShowIndex || 0) * (react_native_1.I18nManager.isRTL ? 1 : -1);\n    this.standardPositionX = this.positionXNumber;\n    this.positionX.setValue(this.positionXNumber);\n  };\n  ImageViewer.prototype.loadImage = function (index) {\n    var _this = this;\n    if (!this.state.imageSizes[index]) {\n      return;\n    }\n    if (this.loadedIndex.has(index)) {\n      return;\n    }\n    this.loadedIndex.set(index, true);\n    var image = this.props.imageUrls[index];\n    var imageStatus = __assign({}, this.state.imageSizes[index]);\n    var saveImageSize = function saveImageSize() {\n      if (_this.state.imageSizes[index] && _this.state.imageSizes[index].status !== 'loading') {\n        return;\n      }\n      var imageSizes = _this.state.imageSizes.slice();\n      imageSizes[index] = imageStatus;\n      _this.setState({\n        imageSizes: imageSizes\n      });\n    };\n    if (this.state.imageSizes[index].status === 'success') {\n      return;\n    }\n    if (this.state.imageSizes[index].width > 0 && this.state.imageSizes[index].height > 0) {\n      imageStatus.status = 'success';\n      saveImageSize();\n      return;\n    }\n    var sizeLoaded = false;\n    var imageLoaded = false;\n    if (!image.url || image.url.startsWith(\"file:\")) {\n      imageLoaded = true;\n    }\n    if (image.width && image.height) {\n      if (this.props.enablePreload && imageLoaded === false) {\n        react_native_1.Image.prefetch(image.url);\n      }\n      imageStatus.width = image.width;\n      imageStatus.height = image.height;\n      imageStatus.status = 'success';\n      saveImageSize();\n      return;\n    }\n    react_native_1.Image.getSize(image.url, function (width, height) {\n      imageStatus.width = width;\n      imageStatus.height = height;\n      imageStatus.status = 'success';\n      saveImageSize();\n    }, function () {\n      try {\n        var data = react_native_1.Image.resolveAssetSource(image.props.source);\n        imageStatus.width = data.width;\n        imageStatus.height = data.height;\n        imageStatus.status = 'success';\n        saveImageSize();\n      } catch (newError) {\n        imageStatus.status = 'fail';\n        saveImageSize();\n      }\n    });\n  };\n  ImageViewer.prototype.resetPosition = function () {\n    this.positionXNumber = this.standardPositionX;\n    react_native_1.Animated.timing(this.positionX, {\n      toValue: this.standardPositionX,\n      duration: 150,\n      useNativeDriver: !!this.props.useNativeDriver\n    }).start();\n  };\n  ImageViewer.prototype.getContent = function () {\n    var _this = this;\n    var screenWidth = this.width;\n    var screenHeight = this.height;\n    var ImageElements = this.props.imageUrls.map(function (image, index) {\n      if ((_this.state.currentShowIndex || 0) > index + 1 || (_this.state.currentShowIndex || 0) < index - 1) {\n        return _reactJsxRuntime.jsx(react_native_1.View, {\n          style: {\n            width: screenWidth,\n            height: screenHeight\n          }\n        }, index);\n      }\n      if (!_this.handleLongPressWithIndex.has(index)) {\n        _this.handleLongPressWithIndex.set(index, _this.handleLongPress.bind(_this, image));\n      }\n      var width = _this.state.imageSizes[index] && _this.state.imageSizes[index].width;\n      var height = _this.state.imageSizes[index] && _this.state.imageSizes[index].height;\n      var imageInfo = _this.state.imageSizes[index];\n      if (!imageInfo || !imageInfo.status) {\n        return _reactJsxRuntime.jsx(react_native_1.View, {\n          style: {\n            width: screenWidth,\n            height: screenHeight\n          }\n        }, index);\n      }\n      if (width > screenWidth) {\n        var widthPixel = screenWidth / width;\n        width *= widthPixel;\n        height *= widthPixel;\n      }\n      if (height > screenHeight) {\n        var HeightPixel = screenHeight / height;\n        width *= HeightPixel;\n        height *= HeightPixel;\n      }\n      var Wrapper = function Wrapper(_a) {\n        var children = _a.children,\n          others = __rest(_a, [\"children\"]);\n        return _reactJsxRuntime.jsx(react_native_image_pan_zoom_1.default, _objectSpread(_objectSpread({\n          cropWidth: _this.width,\n          cropHeight: _this.height,\n          maxOverflow: _this.props.maxOverflow,\n          horizontalOuterRangeOffset: _this.handleHorizontalOuterRangeOffset,\n          responderRelease: _this.handleResponderRelease,\n          onMove: _this.props.onMove,\n          onLongPress: _this.handleLongPressWithIndex.get(index),\n          onClick: _this.handleClick,\n          onDoubleClick: _this.handleDoubleClick,\n          enableSwipeDown: _this.props.enableSwipeDown,\n          swipeDownThreshold: _this.props.swipeDownThreshold,\n          onSwipeDown: _this.handleSwipeDown,\n          pinchToZoom: _this.props.enableImageZoom,\n          enableDoubleClickZoom: _this.props.enableImageZoom,\n          doubleClickInterval: _this.props.doubleClickInterval\n        }, others), {}, {\n          children: children\n        }));\n      };\n      switch (imageInfo.status) {\n        case 'loading':\n          return _reactJsxRuntime.jsx(Wrapper, {\n            style: __assign({}, _this.styles.modalContainer, _this.styles.loadingContainer),\n            imageWidth: screenWidth,\n            imageHeight: screenHeight,\n            children: _reactJsxRuntime.jsx(react_native_1.View, {\n              style: _this.styles.loadingContainer,\n              children: _this.props.loadingRender()\n            })\n          }, index);\n        case 'success':\n          if (!image.props) {\n            image.props = {};\n          }\n          if (!image.props.style) {\n            image.props.style = {};\n          }\n          image.props.style = __assign({}, _this.styles.imageStyle, image.props.style, {\n            width: width,\n            height: height\n          });\n          if (typeof image.props.source === 'number') {} else {\n            if (!image.props.source) {\n              image.props.source = {};\n            }\n            image.props.source = __assign({\n              uri: image.url\n            }, image.props.source);\n          }\n          if (_this.props.enablePreload) {\n            _this.preloadImage(_this.state.currentShowIndex || 0);\n          }\n          return _reactJsxRuntime.jsx(react_native_image_pan_zoom_1.default, {\n            ref: function ref(el) {\n              return _this.imageRefs[index] = el;\n            },\n            cropWidth: _this.width,\n            cropHeight: _this.height,\n            maxOverflow: _this.props.maxOverflow,\n            horizontalOuterRangeOffset: _this.handleHorizontalOuterRangeOffset,\n            responderRelease: _this.handleResponderRelease,\n            onMove: _this.props.onMove,\n            onLongPress: _this.handleLongPressWithIndex.get(index),\n            onClick: _this.handleClick,\n            onDoubleClick: _this.handleDoubleClick,\n            imageWidth: width,\n            imageHeight: height,\n            enableSwipeDown: _this.props.enableSwipeDown,\n            swipeDownThreshold: _this.props.swipeDownThreshold,\n            onSwipeDown: _this.handleSwipeDown,\n            panToMove: !_this.state.isShowMenu,\n            pinchToZoom: _this.props.enableImageZoom && !_this.state.isShowMenu,\n            enableDoubleClickZoom: _this.props.enableImageZoom && !_this.state.isShowMenu,\n            doubleClickInterval: _this.props.doubleClickInterval,\n            minScale: _this.props.minScale,\n            maxScale: _this.props.maxScale,\n            children: _this.props.renderImage(image.props)\n          }, index);\n        case 'fail':\n          return _reactJsxRuntime.jsx(Wrapper, {\n            style: _this.styles.modalContainer,\n            imageWidth: _this.props.failImageSource ? _this.props.failImageSource.width : screenWidth,\n            imageHeight: _this.props.failImageSource ? _this.props.failImageSource.height : screenHeight,\n            children: _this.props.failImageSource && _this.props.renderImage({\n              source: {\n                uri: _this.props.failImageSource.url\n              },\n              style: {\n                width: _this.props.failImageSource.width,\n                height: _this.props.failImageSource.height\n              }\n            })\n          }, index);\n      }\n    });\n    return _reactJsxRuntime.jsx(react_native_1.Animated.View, {\n      style: {\n        zIndex: 9\n      },\n      children: _reactJsxRuntime.jsxs(react_native_1.Animated.View, {\n        style: __assign({}, this.styles.container, {\n          opacity: this.fadeAnim\n        }),\n        children: [this.props.renderHeader(this.state.currentShowIndex), _reactJsxRuntime.jsx(react_native_1.View, {\n          style: this.styles.arrowLeftContainer,\n          children: _reactJsxRuntime.jsx(react_native_1.TouchableWithoutFeedback, {\n            onPress: this.goBack,\n            children: _reactJsxRuntime.jsx(react_native_1.View, {\n              children: this.props.renderArrowLeft()\n            })\n          })\n        }), _reactJsxRuntime.jsx(react_native_1.View, {\n          style: this.styles.arrowRightContainer,\n          children: _reactJsxRuntime.jsx(react_native_1.TouchableWithoutFeedback, {\n            onPress: this.goNext,\n            children: _reactJsxRuntime.jsx(react_native_1.View, {\n              children: this.props.renderArrowRight()\n            })\n          })\n        }), _reactJsxRuntime.jsx(react_native_1.Animated.View, {\n          style: __assign({}, this.styles.moveBox, {\n            transform: [{\n              translateX: this.positionX\n            }],\n            width: this.width * this.props.imageUrls.length\n          }),\n          children: ImageElements\n        }), this.props.renderIndicator((this.state.currentShowIndex || 0) + 1, this.props.imageUrls.length), this.props.imageUrls[this.state.currentShowIndex || 0] && this.props.imageUrls[this.state.currentShowIndex || 0].originSizeKb && this.props.imageUrls[this.state.currentShowIndex || 0].originUrl && _reactJsxRuntime.jsx(react_native_1.View, {\n          style: this.styles.watchOrigin,\n          children: _reactJsxRuntime.jsx(react_native_1.TouchableOpacity, {\n            style: this.styles.watchOriginTouchable,\n            children: _reactJsxRuntime.jsx(react_native_1.Text, {\n              style: this.styles.watchOriginText,\n              children: \"\\u67E5\\u770B\\u539F\\u56FE(2M)\"\n            })\n          })\n        }), _reactJsxRuntime.jsx(react_native_1.View, {\n          style: [{\n            bottom: 0,\n            position: 'absolute',\n            zIndex: 9\n          }, this.props.footerContainerStyle],\n          children: this.props.renderFooter(this.state.currentShowIndex || 0)\n        })]\n      })\n    });\n  };\n  ImageViewer.prototype.getMenu = function () {\n    if (!this.state.isShowMenu) {\n      return null;\n    }\n    if (this.props.menus) {\n      return _reactJsxRuntime.jsx(react_native_1.View, {\n        style: this.styles.menuContainer,\n        children: this.props.menus({\n          cancel: this.handleLeaveMenu,\n          saveToLocal: this.saveToLocal\n        })\n      });\n    }\n    return _reactJsxRuntime.jsxs(react_native_1.View, {\n      style: this.styles.menuContainer,\n      children: [_reactJsxRuntime.jsx(react_native_1.View, {\n        style: this.styles.menuShadow\n      }), _reactJsxRuntime.jsxs(react_native_1.View, {\n        style: this.styles.menuContent,\n        children: [_reactJsxRuntime.jsx(react_native_1.TouchableHighlight, {\n          underlayColor: \"#F2F2F2\",\n          onPress: this.saveToLocal,\n          style: this.styles.operateContainer,\n          children: _reactJsxRuntime.jsx(react_native_1.Text, {\n            style: this.styles.operateText,\n            children: this.props.menuContext.saveToLocal\n          })\n        }), _reactJsxRuntime.jsx(react_native_1.TouchableHighlight, {\n          underlayColor: \"#F2F2F2\",\n          onPress: this.handleLeaveMenu,\n          style: this.styles.operateContainer,\n          children: _reactJsxRuntime.jsx(react_native_1.Text, {\n            style: this.styles.operateText,\n            children: this.props.menuContext.cancel\n          })\n        })]\n      })]\n    });\n  };\n  ImageViewer.prototype.render = function () {\n    var childs = null;\n    childs = _reactJsxRuntime.jsxs(react_native_1.View, {\n      children: [this.getContent(), this.getMenu()]\n    });\n    return _reactJsxRuntime.jsx(react_native_1.View, {\n      onLayout: this.handleLayout,\n      style: __assign({\n        flex: 1,\n        overflow: 'hidden'\n      }, this.props.style),\n      children: childs\n    });\n  };\n  ImageViewer.defaultProps = new image_viewer_type_1.Props();\n  return ImageViewer;\n}(React.Component);\nexports.default = ImageViewer;","map":{"version":3,"names":["React","require","react_native_1","react_native_image_pan_zoom_1","image_viewer_style_1","image_viewer_type_1","ImageViewer","_super","__extends","_this","apply","arguments","state","State","fadeAnim","Animated","Value","standardPositionX","positionXNumber","positionX","width","height","styles","default","hasLayout","loadedIndex","Map","handleLongPressWithIndex","imageRefs","resetImageByIndex","index","reset","preloadImage","imageSizes","length","loadImage","handleHorizontalOuterRangeOffset","offsetX","setValue","offsetXRTL","I18nManager","isRTL","currentShowIndex","props","imageUrls","handleResponderRelease","vx","vxRTL","isLeftMove","flipThreshold","isRightMove","goBack","call","goNext","resetPosition","timing","toValue","duration","pageAnimateTime","useNativeDriver","start","nextIndex","setState","onChange","handleLongPress","image","saveToLocalByLongPress","isShowMenu","onLongPress","handleClick","onClick","handleCancel","handleDoubleClick","onDoubleClick","onCancel","handleLayout","event","nativeEvent","layout","backgroundColor","forceUpdate","jumpToCurrentImage","saveToLocal","onSave","CameraRoll","saveToCameraRoll","url","onSaveToCamera","handleLeaveMenu","handleSwipeDown","onSwipeDown","prototype","componentDidMount","init","getDerivedStateFromProps","nextProps","prevState","prevIndexProp","componentDidUpdate","prevProps","forEach","imageUrl","push","status","has","set","imageStatus","__assign","saveImageSize","slice","sizeLoaded","imageLoaded","startsWith","enablePreload","Image","prefetch","getSize","data","resolveAssetSource","source","newError","getContent","screenWidth","screenHeight","ImageElements","map","_reactJsxRuntime","jsx","View","style","bind","imageInfo","widthPixel","HeightPixel","Wrapper","_a","children","others","__rest","_objectSpread","cropWidth","cropHeight","maxOverflow","horizontalOuterRangeOffset","responderRelease","onMove","get","enableSwipeDown","swipeDownThreshold","pinchToZoom","enableImageZoom","enableDoubleClickZoom","doubleClickInterval","modalContainer","loadingContainer","imageWidth","imageHeight","loadingRender","imageStyle","uri","ref","el","panToMove","minScale","maxScale","renderImage","failImageSource","zIndex","jsxs","container","opacity","renderHeader","arrowLeftContainer","TouchableWithoutFeedback","onPress","renderArrowLeft","arrowRightContainer","renderArrowRight","moveBox","transform","translateX","renderIndicator","originSizeKb","originUrl","watchOrigin","TouchableOpacity","watchOriginTouchable","Text","watchOriginText","bottom","position","footerContainerStyle","renderFooter","getMenu","menus","menuContainer","cancel","menuShadow","menuContent","TouchableHighlight","underlayColor","operateContainer","operateText","menuContext","render","childs","onLayout","flex","overflow","defaultProps","Props","Component"],"sources":["C:\\Users\\T480\\source\\repos\\Messenger\\Messenger\\node_modules\\react-native-image-zoom-viewer\\src\\image-viewer.component.tsx"],"sourcesContent":["import * as React from 'react';\r\n\r\nimport {\r\n  Animated,\r\n  CameraRoll,\r\n  Dimensions,\r\n  I18nManager,\r\n  Image,\r\n  PanResponder,\r\n  Platform,\r\n  Text,\r\n  TouchableHighlight,\r\n  TouchableOpacity,\r\n  TouchableWithoutFeedback,\r\n  View,\r\n  ViewStyle\r\n} from 'react-native';\r\nimport ImageZoom from 'react-native-image-pan-zoom';\r\nimport styles from './image-viewer.style';\r\nimport { IImageInfo, IImageSize, Props, State } from './image-viewer.type';\r\n\r\nexport default class ImageViewer extends React.Component<Props, State> {\r\n  public static defaultProps = new Props();\r\n  public state = new State();\r\n\r\n  // 背景透明度渐变动画\r\n  private fadeAnim = new Animated.Value(0);\r\n\r\n  // 当前基准位置\r\n  private standardPositionX = 0;\r\n\r\n  // 整体位移，用来切换图片用\r\n  private positionXNumber = 0;\r\n  private positionX = new Animated.Value(0);\r\n\r\n  private width = 0;\r\n  private height = 0;\r\n\r\n  private styles = styles(0, 0, 'transparent');\r\n\r\n  // 是否执行过 layout. fix 安卓不断触发 onLayout 的 bug\r\n  private hasLayout = false;\r\n\r\n  // 记录已加载的图片 index\r\n  private loadedIndex = new Map<number, boolean>();\r\n\r\n  private handleLongPressWithIndex = new Map<number, any>();\r\n\r\n  private imageRefs: any[] = [];\r\n\r\n  public componentDidMount() {\r\n    this.init(this.props);\r\n  }\r\n\r\n  static getDerivedStateFromProps(nextProps: Props, prevState: State) {\r\n    if (nextProps.index !== prevState.prevIndexProp) {\r\n      return { currentShowIndex: nextProps.index, prevIndexProp: nextProps.index };\r\n    }\r\n    return null;\r\n  }\r\n\r\n  public componentDidUpdate(prevProps: Props, prevState: State) {\r\n    if (prevProps.index !== this.props.index) {\r\n      // 立刻预加载要看的图\r\n      this.loadImage(this.props.index || 0);\r\n\r\n      this.jumpToCurrentImage();\r\n\r\n      // 显示动画\r\n      Animated.timing(this.fadeAnim, {\r\n        toValue: 1,\r\n        duration: 200,\r\n        useNativeDriver: !!this.props.useNativeDriver\r\n      }).start();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * props 有变化时执行\r\n   */\r\n  public init(nextProps: Props) {\r\n    if (nextProps.imageUrls.length === 0) {\r\n      // 隐藏时候清空\r\n      this.fadeAnim.setValue(0);\r\n      return this.setState(new State());\r\n    }\r\n\r\n    // 给 imageSizes 塞入空数组\r\n    const imageSizes: IImageSize[] = [];\r\n    nextProps.imageUrls.forEach(imageUrl => {\r\n      imageSizes.push({\r\n        width: imageUrl.width || 0,\r\n        height: imageUrl.height || 0,\r\n        status: 'loading'\r\n      });\r\n    });\r\n\r\n    this.setState(\r\n      {\r\n        currentShowIndex: nextProps.index,\r\n        prevIndexProp: nextProps.index || 0,\r\n        imageSizes\r\n      },\r\n      () => {\r\n        // 立刻预加载要看的图\r\n        this.loadImage(nextProps.index || 0);\r\n\r\n        this.jumpToCurrentImage();\r\n\r\n        // 显示动画\r\n        Animated.timing(this.fadeAnim, {\r\n          toValue: 1,\r\n          duration: 200,\r\n          useNativeDriver: !!nextProps.useNativeDriver\r\n        }).start();\r\n      }\r\n    );\r\n  }\r\n  /**\r\n   * reset Image scale and position\r\n   */\r\n  public resetImageByIndex = (index: number) => {\r\n    this.imageRefs[index] && this.imageRefs[index].reset();\r\n  };\r\n  /**\r\n   * 调到当前看图位置\r\n   */\r\n  public jumpToCurrentImage() {\r\n    // 跳到当前图的位置\r\n    this.positionXNumber = this.width * (this.state.currentShowIndex || 0) * (I18nManager.isRTL ? 1 : -1);\r\n    this.standardPositionX = this.positionXNumber;\r\n    this.positionX.setValue(this.positionXNumber);\r\n  }\r\n\r\n  /**\r\n   * 加载图片，主要是获取图片长与宽\r\n   */\r\n  public loadImage(index: number) {\r\n    if (!this!.state!.imageSizes![index]) {\r\n      return;\r\n    }\r\n\r\n    if (this.loadedIndex.has(index)) {\r\n      return;\r\n    }\r\n    this.loadedIndex.set(index, true);\r\n\r\n    const image = this.props.imageUrls[index];\r\n    const imageStatus = { ...this!.state!.imageSizes![index] };\r\n\r\n    // 保存 imageSize\r\n    const saveImageSize = () => {\r\n      // 如果已经 success 了，就不做处理\r\n      if (this!.state!.imageSizes![index] && this!.state!.imageSizes![index].status !== 'loading') {\r\n        return;\r\n      }\r\n\r\n      const imageSizes = this!.state!.imageSizes!.slice();\r\n      imageSizes[index] = imageStatus;\r\n      this.setState({ imageSizes });\r\n    };\r\n\r\n    if (this!.state!.imageSizes![index].status === 'success') {\r\n      // 已经加载过就不会加载了\r\n      return;\r\n    }\r\n\r\n    // 如果已经有宽高了，直接设置为 success\r\n    if (this!.state!.imageSizes![index].width > 0 && this!.state!.imageSizes![index].height > 0) {\r\n      imageStatus.status = 'success';\r\n      saveImageSize();\r\n      return;\r\n    }\r\n\r\n    // 是否加载完毕了图片大小\r\n    const sizeLoaded = false;\r\n    // 是否加载完毕了图片\r\n    let imageLoaded = false;\r\n\r\n    // Tagged success if url is started with file:, or not set yet(for custom source.uri).\r\n    if (!image.url || image.url.startsWith(`file:`)) {\r\n      imageLoaded = true;\r\n    }\r\n\r\n    // 如果已知源图片宽高，直接设置为 success\r\n    if (image.width && image.height) {\r\n      if (this.props.enablePreload && imageLoaded === false) {\r\n        Image.prefetch(image.url);\r\n      }\r\n      imageStatus.width = image.width;\r\n      imageStatus.height = image.height;\r\n      imageStatus.status = 'success';\r\n      saveImageSize();\r\n      return;\r\n    }\r\n\r\n    Image.getSize(\r\n      image.url,\r\n      (width: number, height: number) => {\r\n        imageStatus.width = width;\r\n        imageStatus.height = height;\r\n        imageStatus.status = 'success';\r\n        saveImageSize();\r\n      },\r\n      () => {\r\n        try {\r\n          const data = (Image as any).resolveAssetSource(image.props.source);\r\n          imageStatus.width = data.width;\r\n          imageStatus.height = data.height;\r\n          imageStatus.status = 'success';\r\n          saveImageSize();\r\n        } catch (newError) {\r\n          // Give up..\r\n          imageStatus.status = 'fail';\r\n          saveImageSize();\r\n        }\r\n      }\r\n    );\r\n  }\r\n\r\n  /**\r\n   * 预加载图片\r\n   */\r\n  public preloadImage = (index: number) => {\r\n    if (index < this.state.imageSizes!.length) {\r\n      this.loadImage(index + 1);\r\n    }\r\n  };\r\n  /**\r\n   * 触发溢出水平滚动\r\n   */\r\n  public handleHorizontalOuterRangeOffset = (offsetX: number = 0) => {\r\n    this.positionXNumber = this.standardPositionX + offsetX;\r\n    this.positionX.setValue(this.positionXNumber);\r\n\r\n    const offsetXRTL = !I18nManager.isRTL ? offsetX : -offsetX;\r\n\r\n    if (offsetXRTL < 0) {\r\n      if (this!.state!.currentShowIndex || 0 < this.props.imageUrls.length - 1) {\r\n        this.loadImage((this!.state!.currentShowIndex || 0) + 1);\r\n      }\r\n    } else if (offsetXRTL > 0) {\r\n      if (this!.state!.currentShowIndex || 0 > 0) {\r\n        this.loadImage((this!.state!.currentShowIndex || 0) - 1);\r\n      }\r\n    }\r\n  };\r\n\r\n  /**\r\n   * 手势结束，但是没有取消浏览大图\r\n   */\r\n  public handleResponderRelease = (vx: number = 0) => {\r\n    const vxRTL = I18nManager.isRTL ? -vx : vx;\r\n    const isLeftMove = I18nManager.isRTL\r\n      ? this.positionXNumber - this.standardPositionX < -(this.props.flipThreshold || 0)\r\n      : this.positionXNumber - this.standardPositionX > (this.props.flipThreshold || 0);\r\n    const isRightMove = I18nManager.isRTL\r\n      ? this.positionXNumber - this.standardPositionX > (this.props.flipThreshold || 0)\r\n      : this.positionXNumber - this.standardPositionX < -(this.props.flipThreshold || 0);\r\n\r\n    if (vxRTL > 0.7) {\r\n      // 上一张\r\n      this.goBack.call(this);\r\n\r\n      // 这里可能没有触发溢出滚动，为了防止图片不被加载，调用加载图片\r\n      if (this.state.currentShowIndex || 0 > 0) {\r\n        this.loadImage((this.state.currentShowIndex || 0) - 1);\r\n      }\r\n      return;\r\n    } else if (vxRTL < -0.7) {\r\n      // 下一张\r\n      this.goNext.call(this);\r\n      if (this.state.currentShowIndex || 0 < this.props.imageUrls.length - 1) {\r\n        this.loadImage((this.state.currentShowIndex || 0) + 1);\r\n      }\r\n      return;\r\n    }\r\n\r\n    if (isLeftMove) {\r\n      // 上一张\r\n      this.goBack.call(this);\r\n    } else if (isRightMove) {\r\n      // 下一张\r\n      this.goNext.call(this);\r\n      return;\r\n    } else {\r\n      // 回到之前的位置\r\n      this.resetPosition.call(this);\r\n      return;\r\n    }\r\n  };\r\n\r\n  /**\r\n   * 到上一张\r\n   */\r\n  public goBack = () => {\r\n    if (this.state.currentShowIndex === 0) {\r\n      // 回到之前的位置\r\n      this.resetPosition.call(this);\r\n      return;\r\n    }\r\n\r\n    this.positionXNumber = !I18nManager.isRTL\r\n      ? this.standardPositionX + this.width\r\n      : this.standardPositionX - this.width;\r\n    this.standardPositionX = this.positionXNumber;\r\n    Animated.timing(this.positionX, {\r\n      toValue: this.positionXNumber,\r\n      duration: this.props.pageAnimateTime,\r\n      useNativeDriver: !!this.props.useNativeDriver\r\n    }).start();\r\n\r\n    const nextIndex = (this.state.currentShowIndex || 0) - 1;\r\n\r\n    this.setState(\r\n      {\r\n        currentShowIndex: nextIndex\r\n      },\r\n      () => {\r\n        if (this.props.onChange) {\r\n          this.props.onChange(this.state.currentShowIndex);\r\n        }\r\n      }\r\n    );\r\n  };\r\n\r\n  /**\r\n   * 到下一张\r\n   */\r\n  public goNext = () => {\r\n    if (this.state.currentShowIndex === this.props.imageUrls.length - 1) {\r\n      // 回到之前的位置\r\n      this.resetPosition.call(this);\r\n      return;\r\n    }\r\n\r\n    this.positionXNumber = !I18nManager.isRTL\r\n      ? this.standardPositionX - this.width\r\n      : this.standardPositionX + this.width;\r\n    this.standardPositionX = this.positionXNumber;\r\n    Animated.timing(this.positionX, {\r\n      toValue: this.positionXNumber,\r\n      duration: this.props.pageAnimateTime,\r\n      useNativeDriver: !!this.props.useNativeDriver\r\n    }).start();\r\n\r\n    const nextIndex = (this.state.currentShowIndex || 0) + 1;\r\n\r\n    this.setState(\r\n      {\r\n        currentShowIndex: nextIndex\r\n      },\r\n      () => {\r\n        if (this.props.onChange) {\r\n          this.props.onChange(this.state.currentShowIndex);\r\n        }\r\n      }\r\n    );\r\n  };\r\n\r\n  /**\r\n   * 回到原位\r\n   */\r\n  public resetPosition() {\r\n    this.positionXNumber = this.standardPositionX;\r\n    Animated.timing(this.positionX, {\r\n      toValue: this.standardPositionX,\r\n      duration: 150,\r\n      useNativeDriver: !!this.props.useNativeDriver\r\n    }).start();\r\n  }\r\n\r\n  /**\r\n   * 长按\r\n   */\r\n  public handleLongPress = (image: IImageInfo) => {\r\n    if (this.props.saveToLocalByLongPress) {\r\n      // 出现保存到本地的操作框\r\n      this.setState({ isShowMenu: true });\r\n    }\r\n\r\n    if (this.props.onLongPress) {\r\n      this.props.onLongPress(image);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * 单击\r\n   */\r\n  public handleClick = () => {\r\n    if (this.props.onClick) {\r\n      this.props.onClick(this.handleCancel, this.state.currentShowIndex);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * 双击\r\n   */\r\n  public handleDoubleClick = () => {\r\n    if (this.props.onDoubleClick) {\r\n      this.props.onDoubleClick(this.handleCancel);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * 退出\r\n   */\r\n  public handleCancel = () => {\r\n    this.hasLayout = false;\r\n    if (this.props.onCancel) {\r\n      this.props.onCancel();\r\n    }\r\n  };\r\n\r\n  /**\r\n   * 完成布局\r\n   */\r\n  public handleLayout = (event: any) => {\r\n    if (event.nativeEvent.layout.width !== this.width) {\r\n      this.hasLayout = true;\r\n\r\n      this.width = event.nativeEvent.layout.width;\r\n      this.height = event.nativeEvent.layout.height;\r\n      this.styles = styles(this.width, this.height, this.props.backgroundColor || 'transparent');\r\n\r\n      // 强制刷新\r\n      this.forceUpdate();\r\n      this.jumpToCurrentImage();\r\n    }\r\n  };\r\n\r\n  /**\r\n   * 获得整体内容\r\n   */\r\n  public getContent() {\r\n    // 获得屏幕宽高\r\n    const screenWidth = this.width;\r\n    const screenHeight = this.height;\r\n\r\n    const ImageElements = this.props.imageUrls.map((image, index) => {\r\n      if ((this.state.currentShowIndex || 0) > index + 1 || (this.state.currentShowIndex || 0) < index - 1) {\r\n        return <View key={index} style={{ width: screenWidth, height: screenHeight }} />;\r\n      }\r\n\r\n      if (!this.handleLongPressWithIndex.has(index)) {\r\n        this.handleLongPressWithIndex.set(index, this.handleLongPress.bind(this, image));\r\n      }\r\n\r\n      let width = this!.state!.imageSizes![index] && this!.state!.imageSizes![index].width;\r\n      let height = this.state.imageSizes![index] && this.state.imageSizes![index].height;\r\n      const imageInfo = this.state.imageSizes![index];\r\n\r\n      if (!imageInfo || !imageInfo.status) {\r\n        return <View key={index} style={{ width: screenWidth, height: screenHeight }} />;\r\n      }\r\n\r\n      // 如果宽大于屏幕宽度,整体缩放到宽度是屏幕宽度\r\n      if (width > screenWidth) {\r\n        const widthPixel = screenWidth / width;\r\n        width *= widthPixel;\r\n        height *= widthPixel;\r\n      }\r\n\r\n      // 如果此时高度还大于屏幕高度,整体缩放到高度是屏幕高度\r\n      if (height > screenHeight) {\r\n        const HeightPixel = screenHeight / height;\r\n        width *= HeightPixel;\r\n        height *= HeightPixel;\r\n      }\r\n\r\n      const Wrapper = ({ children, ...others }: any) => (\r\n        <ImageZoom\r\n          cropWidth={this.width}\r\n          cropHeight={this.height}\r\n          maxOverflow={this.props.maxOverflow}\r\n          horizontalOuterRangeOffset={this.handleHorizontalOuterRangeOffset}\r\n          responderRelease={this.handleResponderRelease}\r\n          onMove={this.props.onMove}\r\n          onLongPress={this.handleLongPressWithIndex.get(index)}\r\n          onClick={this.handleClick}\r\n          onDoubleClick={this.handleDoubleClick}\r\n          enableSwipeDown={this.props.enableSwipeDown}\r\n          swipeDownThreshold={this.props.swipeDownThreshold}\r\n          onSwipeDown={this.handleSwipeDown}\r\n          pinchToZoom={this.props.enableImageZoom}\r\n          enableDoubleClickZoom={this.props.enableImageZoom}\r\n          doubleClickInterval={this.props.doubleClickInterval}\r\n          {...others}\r\n        >\r\n          {children}\r\n        </ImageZoom>\r\n      );\r\n\r\n      switch (imageInfo.status) {\r\n        case 'loading':\r\n          return (\r\n            <Wrapper\r\n              key={index}\r\n              style={{\r\n                ...this.styles.modalContainer,\r\n                ...this.styles.loadingContainer\r\n              }}\r\n              imageWidth={screenWidth}\r\n              imageHeight={screenHeight}\r\n            >\r\n              <View style={this.styles.loadingContainer}>{this!.props!.loadingRender!()}</View>\r\n            </Wrapper>\r\n          );\r\n        case 'success':\r\n          if (!image.props) {\r\n            image.props = {};\r\n          }\r\n\r\n          if (!image.props.style) {\r\n            image.props.style = {};\r\n          }\r\n          image.props.style = {\r\n            ...this.styles.imageStyle, // User config can override above.\r\n            ...image.props.style,\r\n            width,\r\n            height\r\n          };\r\n\r\n          if (typeof image.props.source === 'number') {\r\n            // source = require(..), doing nothing\r\n          } else {\r\n            if (!image.props.source) {\r\n              image.props.source = {};\r\n            }\r\n            image.props.source = {\r\n              uri: image.url,\r\n              ...image.props.source\r\n            };\r\n          }\r\n          if (this.props.enablePreload) {\r\n            this.preloadImage(this.state.currentShowIndex || 0);\r\n          }\r\n          return (\r\n            <ImageZoom\r\n              key={index}\r\n              ref={el => (this.imageRefs[index] = el)}\r\n              cropWidth={this.width}\r\n              cropHeight={this.height}\r\n              maxOverflow={this.props.maxOverflow}\r\n              horizontalOuterRangeOffset={this.handleHorizontalOuterRangeOffset}\r\n              responderRelease={this.handleResponderRelease}\r\n              onMove={this.props.onMove}\r\n              onLongPress={this.handleLongPressWithIndex.get(index)}\r\n              onClick={this.handleClick}\r\n              onDoubleClick={this.handleDoubleClick}\r\n              imageWidth={width}\r\n              imageHeight={height}\r\n              enableSwipeDown={this.props.enableSwipeDown}\r\n              swipeDownThreshold={this.props.swipeDownThreshold}\r\n              onSwipeDown={this.handleSwipeDown}\r\n              panToMove={!this.state.isShowMenu}\r\n              pinchToZoom={this.props.enableImageZoom && !this.state.isShowMenu}\r\n              enableDoubleClickZoom={this.props.enableImageZoom && !this.state.isShowMenu}\r\n              doubleClickInterval={this.props.doubleClickInterval}\r\n              minScale={this.props.minScale}\r\n              maxScale={this.props.maxScale}\r\n            >\r\n              {this!.props!.renderImage!(image.props)}\r\n            </ImageZoom>\r\n          );\r\n        case 'fail':\r\n          return (\r\n            <Wrapper\r\n              key={index}\r\n              style={this.styles.modalContainer}\r\n              imageWidth={this.props.failImageSource ? this.props.failImageSource.width : screenWidth}\r\n              imageHeight={this.props.failImageSource ? this.props.failImageSource.height : screenHeight}\r\n            >\r\n              {this.props.failImageSource &&\r\n                this!.props!.renderImage!({\r\n                  source: {\r\n                    uri: this.props.failImageSource.url\r\n                  },\r\n                  style: {\r\n                    width: this.props.failImageSource.width,\r\n                    height: this.props.failImageSource.height\r\n                  }\r\n                })}\r\n            </Wrapper>\r\n          );\r\n      }\r\n    });\r\n\r\n    return (\r\n      <Animated.View style={{ zIndex: 9 }}>\r\n        <Animated.View style={{ ...this.styles.container, opacity: this.fadeAnim }}>\r\n          {this!.props!.renderHeader!(this.state.currentShowIndex)}\r\n\r\n          <View style={this.styles.arrowLeftContainer}>\r\n            <TouchableWithoutFeedback onPress={this.goBack}>\r\n              <View>{this!.props!.renderArrowLeft!()}</View>\r\n            </TouchableWithoutFeedback>\r\n          </View>\r\n\r\n          <View style={this.styles.arrowRightContainer}>\r\n            <TouchableWithoutFeedback onPress={this.goNext}>\r\n              <View>{this!.props!.renderArrowRight!()}</View>\r\n            </TouchableWithoutFeedback>\r\n          </View>\r\n\r\n          <Animated.View\r\n            style={{\r\n              ...this.styles.moveBox,\r\n              transform: [{ translateX: this.positionX }],\r\n              width: this.width * this.props.imageUrls.length\r\n            }}\r\n          >\r\n            {ImageElements}\r\n          </Animated.View>\r\n          {this!.props!.renderIndicator!((this.state.currentShowIndex || 0) + 1, this.props.imageUrls.length)}\r\n\r\n          {this.props.imageUrls[this.state.currentShowIndex || 0] &&\r\n            this.props.imageUrls[this.state.currentShowIndex || 0].originSizeKb &&\r\n            this.props.imageUrls[this.state.currentShowIndex || 0].originUrl && (\r\n              <View style={this.styles.watchOrigin}>\r\n                <TouchableOpacity style={this.styles.watchOriginTouchable}>\r\n                  <Text style={this.styles.watchOriginText}>查看原图(2M)</Text>\r\n                </TouchableOpacity>\r\n              </View>\r\n            )}\r\n          <View style={[{ bottom: 0, position: 'absolute', zIndex: 9 }, this.props.footerContainerStyle]}>\r\n            {this!.props!.renderFooter!(this.state.currentShowIndex || 0)}\r\n          </View>\r\n        </Animated.View>\r\n      </Animated.View>\r\n    );\r\n  }\r\n\r\n  /**\r\n   * 保存当前图片到本地相册\r\n   */\r\n  public saveToLocal = () => {\r\n    if (!this.props.onSave) {\r\n      CameraRoll.saveToCameraRoll(this.props.imageUrls[this.state.currentShowIndex || 0].url);\r\n      this!.props!.onSaveToCamera!(this.state.currentShowIndex);\r\n    } else {\r\n      this.props.onSave(this.props.imageUrls[this.state.currentShowIndex || 0].url);\r\n    }\r\n\r\n    this.setState({ isShowMenu: false });\r\n  };\r\n\r\n  public getMenu() {\r\n    if (!this.state.isShowMenu) {\r\n      return null;\r\n    }\r\n\r\n    if (this.props.menus) {\r\n      return (\r\n        <View style={this.styles.menuContainer}>\r\n          {this.props.menus({ cancel: this.handleLeaveMenu, saveToLocal: this.saveToLocal })}\r\n        </View>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <View style={this.styles.menuContainer}>\r\n        <View style={this.styles.menuShadow} />\r\n        <View style={this.styles.menuContent}>\r\n          <TouchableHighlight underlayColor=\"#F2F2F2\" onPress={this.saveToLocal} style={this.styles.operateContainer}>\r\n            <Text style={this.styles.operateText}>{this.props.menuContext.saveToLocal}</Text>\r\n          </TouchableHighlight>\r\n          <TouchableHighlight\r\n            underlayColor=\"#F2F2F2\"\r\n            onPress={this.handleLeaveMenu}\r\n            style={this.styles.operateContainer}\r\n          >\r\n            <Text style={this.styles.operateText}>{this.props.menuContext.cancel}</Text>\r\n          </TouchableHighlight>\r\n        </View>\r\n      </View>\r\n    );\r\n  }\r\n\r\n  public handleLeaveMenu = () => {\r\n    this.setState({ isShowMenu: false });\r\n  };\r\n\r\n  public handleSwipeDown = () => {\r\n    if (this.props.onSwipeDown) {\r\n      this.props.onSwipeDown();\r\n    }\r\n    this.handleCancel();\r\n  };\r\n\r\n  public render() {\r\n    let childs: React.ReactElement<any> = null as any;\r\n\r\n    childs = (\r\n      <View>\r\n        {this.getContent()}\r\n        {this.getMenu()}\r\n      </View>\r\n    );\r\n\r\n    return (\r\n      <View\r\n        onLayout={this.handleLayout}\r\n        style={{\r\n          flex: 1,\r\n          overflow: 'hidden',\r\n          ...this.props.style\r\n        }}\r\n      >\r\n        {childs}\r\n      </View>\r\n    );\r\n  }\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}