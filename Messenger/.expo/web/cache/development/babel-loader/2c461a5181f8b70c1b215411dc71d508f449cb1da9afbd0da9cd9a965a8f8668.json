{"ast":null,"code":"import { defineAnimation, getReduceMotionForAnimation } from \"./util\";\nexport var withRepeat = function withRepeat(_nextAnimation) {\n  'worklet';\n\n  var numberOfReps = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 2;\n  var reverse = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n  var callback = arguments.length > 3 ? arguments[3] : undefined;\n  var reduceMotion = arguments.length > 4 ? arguments[4] : undefined;\n  return defineAnimation(_nextAnimation, function () {\n    'worklet';\n\n    var nextAnimation = typeof _nextAnimation === 'function' ? _nextAnimation() : _nextAnimation;\n    function repeat(animation, now) {\n      var finished = nextAnimation.onFrame(nextAnimation, now);\n      animation.current = nextAnimation.current;\n      if (finished) {\n        animation.reps += 1;\n        if (nextAnimation.callback) {\n          nextAnimation.callback(true, animation.current);\n        }\n        if (animation.reduceMotion || numberOfReps > 0 && animation.reps >= numberOfReps) {\n          return true;\n        }\n        var startValue = reverse ? nextAnimation.current : animation.startValue;\n        if (reverse) {\n          nextAnimation.toValue = animation.startValue;\n          animation.startValue = startValue;\n        }\n        nextAnimation.onStart(nextAnimation, startValue, now, nextAnimation.previousAnimation);\n        return false;\n      }\n      return false;\n    }\n    var repCallback = function repCallback(finished) {\n      if (callback) {\n        callback(finished);\n      }\n      if (!finished && nextAnimation.callback) {\n        nextAnimation.callback(false);\n      }\n    };\n    function onStart(animation, value, now, previousAnimation) {\n      animation.startValue = value;\n      animation.reps = 0;\n      if (nextAnimation.reduceMotion === undefined) {\n        nextAnimation.reduceMotion = animation.reduceMotion;\n      }\n      if (animation.reduceMotion && reverse && (numberOfReps <= 0 || numberOfReps % 2 === 0)) {\n        animation.current = animation.startValue;\n        animation.onFrame = function () {\n          return true;\n        };\n      } else {\n        nextAnimation.onStart(nextAnimation, value, now, previousAnimation);\n      }\n    }\n    return {\n      isHigherOrder: true,\n      onFrame: repeat,\n      onStart: onStart,\n      reps: 0,\n      current: nextAnimation.current,\n      callback: repCallback,\n      startValue: 0,\n      reduceMotion: getReduceMotionForAnimation(reduceMotion)\n    };\n  });\n};","map":{"version":3,"names":["defineAnimation","getReduceMotionForAnimation","withRepeat","_nextAnimation","numberOfReps","arguments","length","undefined","reverse","callback","reduceMotion","nextAnimation","repeat","animation","now","finished","onFrame","current","reps","startValue","toValue","onStart","previousAnimation","repCallback","value","isHigherOrder"],"sources":["C:\\Users\\Admin\\Project\\Project\\Messenger\\Messenger\\node_modules\\react-native-reanimated\\lib\\module\\reanimated2\\animation\\repeat.ts"],"sourcesContent":["import { defineAnimation, getReduceMotionForAnimation } from './util';\nimport type {\n  Animation,\n  AnimationCallback,\n  AnimatableValue,\n  Timestamp,\n  AnimationObject,\n  ReduceMotion,\n} from '../commonTypes';\nimport type { RepeatAnimation } from './commonTypes';\n\n// TODO TYPESCRIPT This is a temporary type to get rid of .d.ts file.\ntype withRepeatType = <T extends AnimatableValue>(\n  animation: T,\n  numberOfReps?: number,\n  reverse?: boolean,\n  callback?: AnimationCallback,\n  reduceMotion?: ReduceMotion\n) => T;\n\nexport const withRepeat = function <T extends AnimationObject>(\n  _nextAnimation: T | (() => T),\n  numberOfReps = 2,\n  reverse = false,\n  callback?: AnimationCallback,\n  reduceMotion?: ReduceMotion\n): Animation<RepeatAnimation> {\n  'worklet';\n\n  return defineAnimation<RepeatAnimation, T>(\n    _nextAnimation,\n    (): RepeatAnimation => {\n      'worklet';\n\n      const nextAnimation =\n        typeof _nextAnimation === 'function'\n          ? _nextAnimation()\n          : _nextAnimation;\n\n      function repeat(animation: RepeatAnimation, now: Timestamp): boolean {\n        const finished = nextAnimation.onFrame(nextAnimation, now);\n        animation.current = nextAnimation.current;\n        if (finished) {\n          animation.reps += 1;\n          // call inner animation's callback on every repetition\n          // as the second argument the animation's current value is passed\n          if (nextAnimation.callback) {\n            nextAnimation.callback(true /* finished */, animation.current);\n          }\n          if (\n            animation.reduceMotion ||\n            (numberOfReps > 0 && animation.reps >= numberOfReps)\n          ) {\n            return true;\n          }\n\n          const startValue = reverse\n            ? (nextAnimation.current as number)\n            : animation.startValue;\n          if (reverse) {\n            nextAnimation.toValue = animation.startValue;\n            animation.startValue = startValue;\n          }\n          nextAnimation.onStart(\n            nextAnimation,\n            startValue,\n            now,\n            nextAnimation.previousAnimation as RepeatAnimation\n          );\n          return false;\n        }\n        return false;\n      }\n\n      const repCallback = (finished?: boolean): void => {\n        if (callback) {\n          callback(finished);\n        }\n        // when cancelled call inner animation's callback\n        if (!finished && nextAnimation.callback) {\n          nextAnimation.callback(false /* finished */);\n        }\n      };\n\n      function onStart(\n        animation: RepeatAnimation,\n        value: AnimatableValue,\n        now: Timestamp,\n        previousAnimation: Animation<any> | null\n      ): void {\n        animation.startValue = value;\n        animation.reps = 0;\n\n        // child animations inherit the setting, unless they already have it defined\n        // they will have it defined only if the user used the `reduceMotion` prop\n        if (nextAnimation.reduceMotion === undefined) {\n          nextAnimation.reduceMotion = animation.reduceMotion;\n        }\n\n        // don't start the animation if reduced motion is enabled and\n        // the animation would end at its starting point\n        if (\n          animation.reduceMotion &&\n          reverse &&\n          (numberOfReps <= 0 || numberOfReps % 2 === 0)\n        ) {\n          animation.current = animation.startValue;\n          animation.onFrame = () => true;\n        } else {\n          nextAnimation.onStart(nextAnimation, value, now, previousAnimation);\n        }\n      }\n\n      return {\n        isHigherOrder: true,\n        onFrame: repeat,\n        onStart,\n        reps: 0,\n        current: nextAnimation.current,\n        callback: repCallback,\n        startValue: 0,\n        reduceMotion: getReduceMotionForAnimation(reduceMotion),\n      };\n    }\n  );\n} as withRepeatType;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}