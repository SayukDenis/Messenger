{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useEffect, useState } from \"react\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport * as MediaLibrary from \"expo-media-library\";\nimport { heightOfHeader, screenHeight, screenWidth } from \"../../../../Constants/ConstantsForChatlist\";\nimport { TouchableOpacity } from \"react-native-gesture-handler\";\nimport { useDispatch } from \"react-redux\";\nimport { setPhotoForCreateGroupOrChannel } from \"../../../../../../ReducersAndActions/Actions/ChatListActions/ChatListActions\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nvar MainForGallery = function MainForGallery(_ref) {\n  var navigation = _ref.navigation,\n    setOnAddPhotoPress = _ref.setOnAddPhotoPress;\n  var _useState = useState([]),\n    _useState2 = _slicedToArray(_useState, 2),\n    photos = _useState2[0],\n    setPhotos = _useState2[1];\n  var dispatch = useDispatch();\n  useEffect(function () {\n    getPhotos();\n  }, []);\n  var margin = 1;\n  var widthOfImage = screenWidth / 3;\n  var getPhotos = function () {\n    var _ref2 = _asyncToGenerator(function* () {\n      var _yield$MediaLibrary$g = yield MediaLibrary.getAssetsAsync({\n          mediaType: \"photo\"\n        }),\n        assets = _yield$MediaLibrary$g.assets;\n      setPhotos(assets);\n    });\n    return function getPhotos() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  var onPhotoPress = function onPhotoPress(index) {\n    dispatch(setPhotoForCreateGroupOrChannel(photos[index].uri));\n    setOnAddPhotoPress(false);\n    navigation.goBack();\n  };\n  var renderItem = function renderItem(_ref3) {\n    var item = _ref3.item,\n      index = _ref3.index;\n    return _jsx(TouchableOpacity, {\n      onPress: function onPress() {\n        return onPhotoPress(index);\n      },\n      style: {\n        marginBottom: margin,\n        marginRight: (index + 1) % 3 != 0 ? margin : 0\n      },\n      activeOpacity: 0.8,\n      children: _jsx(Image, {\n        source: {\n          uri: item.uri\n        },\n        style: {\n          width: widthOfImage,\n          aspectRatio: 1\n        }\n      })\n    });\n  };\n  return _jsx(FlatList, {\n    data: photos,\n    renderItem: renderItem,\n    numColumns: 3,\n    ListHeaderComponent: _jsx(View, {\n      style: {\n        width: screenWidth,\n        height: heightOfHeader\n      }\n    }),\n    ListFooterComponent: _jsx(View, {\n      style: {\n        width: screenWidth,\n        height: screenHeight * 0.03\n      }\n    })\n  });\n};\nexport default MainForGallery;","map":{"version":3,"names":["React","useEffect","useState","View","Image","FlatList","MediaLibrary","heightOfHeader","screenHeight","screenWidth","TouchableOpacity","useDispatch","setPhotoForCreateGroupOrChannel","jsx","_jsx","MainForGallery","_ref","navigation","setOnAddPhotoPress","_useState","_useState2","_slicedToArray","photos","setPhotos","dispatch","getPhotos","margin","widthOfImage","_ref2","_asyncToGenerator","_yield$MediaLibrary$g","getAssetsAsync","mediaType","assets","apply","arguments","onPhotoPress","index","uri","goBack","renderItem","_ref3","item","onPress","style","marginBottom","marginRight","activeOpacity","children","source","width","aspectRatio","data","numColumns","ListHeaderComponent","height","ListFooterComponent"],"sources":["D:/project/1project/Messenger/Messenger/Pages/ChatList/Components/CreateChannelAndGroupOrWriteMessage/GalleryModalWindow/Gallery/MainForGallery.tsx"],"sourcesContent":["import React, { Dispatch, SetStateAction, useEffect, useState } from \"react\";\r\nimport { View, Image, StyleSheet, Text, FlatList } from \"react-native\";\r\nimport * as MediaLibrary from \"expo-media-library\";\r\nimport {\r\n  heightOfHeader,\r\n  screenHeight,\r\n  screenWidth,\r\n} from \"../../../../Constants/ConstantsForChatlist\";\r\nimport { TouchableOpacity } from \"react-native-gesture-handler\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { setPhotoForCreateGroupOrChannel } from \"../../../../../../ReducersAndActions/Actions/ChatListActions/ChatListActions\";\r\ninterface MainForGalleryProps {\r\n    navigation:any;\r\n    setOnAddPhotoPress:Dispatch<SetStateAction<boolean>>\r\n}\r\n\r\nconst MainForGallery: React.FC<MainForGalleryProps> = ({navigation,setOnAddPhotoPress}) => {\r\n  const [photos, setPhotos] = useState<MediaLibrary.Asset[]>([]);\r\n  const dispatch=useDispatch();\r\n  useEffect(() => {\r\n    getPhotos();\r\n  }, []);\r\n  const margin = 1;\r\n  const widthOfImage = screenWidth / 3;\r\n  const getPhotos = async () => {\r\n    const { assets } = await MediaLibrary.getAssetsAsync({\r\n      mediaType: \"photo\",\r\n    });\r\n    setPhotos(assets);\r\n  };\r\n  const onPhotoPress=(index:number)=>{\r\n    dispatch(setPhotoForCreateGroupOrChannel(photos[index].uri));\r\n    setOnAddPhotoPress(false);\r\n    navigation.goBack();\r\n  }\r\n  const renderItem = ({ item, index }: { item: any; index: number }) => {\r\n    return (\r\n      <TouchableOpacity onPress={()=>onPhotoPress(index)} style={{\r\n        marginBottom:margin,\r\n        marginRight:(index+1)%3!=0?margin:0\r\n      }}\r\n      activeOpacity={0.8}>\r\n        <Image\r\n          source={{ uri: item.uri }}\r\n          style={{\r\n            width: widthOfImage,\r\n            aspectRatio: 1,\r\n          }}\r\n        />\r\n      </TouchableOpacity>\r\n    );\r\n  };\r\n  return (\r\n    <FlatList\r\n      data={photos}\r\n      renderItem={renderItem}\r\n      numColumns={3}\r\n      ListHeaderComponent={\r\n        <View style={{ width: screenWidth, height: heightOfHeader }} />\r\n      }\r\n      ListFooterComponent={\r\n        <View style={{ width: screenWidth, height: screenHeight * 0.03 }} />\r\n      }\r\n    />\r\n  );\r\n};\r\n\r\nexport default MainForGallery;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}