{"ast":null,"code":"import _initializerDefineProperty from \"@babel/runtime/helpers/initializerDefineProperty\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _applyDecoratedDescriptor from \"@babel/runtime/helpers/applyDecoratedDescriptor\";\nimport _initializerWarningHelper from \"@babel/runtime/helpers/initializerWarningHelper\";\nvar _dec, _dec2, _dec3, _dec4, _dec5, _dec6, _dec7, _dec8, _dec9, _dec10, _dec11, _dec12, _dec13, _dec14, _dec15, _class, _class2, _descriptor, _descriptor2, _descriptor3, _descriptor4, _descriptor5, _descriptor6, _descriptor7, _descriptor8, _descriptor9, _descriptor10, _descriptor11, _descriptor12, _descriptor13;\nfunction _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }\nfunction _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }\nimport User from \"./User\";\nimport Model from \"./Model\";\nimport { Column, Entity, JoinColumn, ManyToOne, PrimaryGeneratedColumn } from 'typeorm';\nimport Branch from \"./Chats/Branch\";\nvar Message = (_dec = Entity(), _dec2 = PrimaryGeneratedColumn(), _dec3 = ManyToOne(function () {\n  return User;\n}, {\n  eager: true,\n  cascade: [\"insert\", \"update\"],\n  nullable: true\n}), _dec4 = JoinColumn(), _dec5 = Column('text'), _dec6 = Column('datetime'), _dec7 = Column('integer'), _dec8 = Column('integer', {\n  nullable: true\n}), _dec9 = Column('integer', {\n  nullable: true\n}), _dec10 = Column('integer', {\n  nullable: true\n}), _dec11 = Column('boolean', {\n  default: false\n}), _dec12 = Column({\n  type: 'simple-json',\n  nullable: true\n}), _dec13 = ManyToOne(function () {\n  return Branch;\n}, function (branch) {\n  return branch.messages;\n}, {\n  onDelete: 'CASCADE'\n}), _dec14 = ManyToOne(function () {\n  return Branch;\n}, function (branch) {\n  return branch.pinnedMessage;\n}, {\n  onDelete: 'CASCADE',\n  nullable: true\n}), _dec15 = ManyToOne(function () {\n  return Branch;\n}, function (branch) {\n  return branch.pinnedMessageForAll;\n}, {\n  onDelete: 'CASCADE',\n  nullable: true\n}), _dec(_class = (_class2 = function (_Model) {\n  function Message(author, content, massageType) {\n    var _this;\n    _classCallCheck(this, Message);\n    _this = _callSuper(this, Message);\n    _initializerDefineProperty(_this, \"messageId\", _descriptor, _this);\n    _initializerDefineProperty(_this, \"author\", _descriptor2, _this);\n    _initializerDefineProperty(_this, \"content\", _descriptor3, _this);\n    _initializerDefineProperty(_this, \"sendingTime\", _descriptor4, _this);\n    _initializerDefineProperty(_this, \"messageType\", _descriptor5, _this);\n    _initializerDefineProperty(_this, \"numberInChat\", _descriptor6, _this);\n    _initializerDefineProperty(_this, \"messageResponseId\", _descriptor7, _this);\n    _initializerDefineProperty(_this, \"messageForwardId\", _descriptor8, _this);\n    _initializerDefineProperty(_this, \"isEdited\", _descriptor9, _this);\n    _initializerDefineProperty(_this, \"reactionOnMessage\", _descriptor10, _this);\n    _initializerDefineProperty(_this, \"chat\", _descriptor11, _this);\n    _initializerDefineProperty(_this, \"chatPinned\", _descriptor12, _this);\n    _initializerDefineProperty(_this, \"chatPinnedForAll\", _descriptor13, _this);\n    _this.author = author;\n    _this.content = content;\n    _this.sendingTime = new Date();\n    _this.messageType = massageType;\n    return _this;\n  }\n  _inherits(Message, _Model);\n  return _createClass(Message);\n}(Model), (_descriptor = _applyDecoratedDescriptor(_class2.prototype, \"messageId\", [_dec2], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: null\n}), _descriptor2 = _applyDecoratedDescriptor(_class2.prototype, \"author\", [_dec3, _dec4], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: null\n}), _descriptor3 = _applyDecoratedDescriptor(_class2.prototype, \"content\", [_dec5], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: null\n}), _descriptor4 = _applyDecoratedDescriptor(_class2.prototype, \"sendingTime\", [_dec6], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: null\n}), _descriptor5 = _applyDecoratedDescriptor(_class2.prototype, \"messageType\", [_dec7], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: null\n}), _descriptor6 = _applyDecoratedDescriptor(_class2.prototype, \"numberInChat\", [_dec8], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: null\n}), _descriptor7 = _applyDecoratedDescriptor(_class2.prototype, \"messageResponseId\", [_dec9], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: null\n}), _descriptor8 = _applyDecoratedDescriptor(_class2.prototype, \"messageForwardId\", [_dec10], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: null\n}), _descriptor9 = _applyDecoratedDescriptor(_class2.prototype, \"isEdited\", [_dec11], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return false;\n  }\n}), _descriptor10 = _applyDecoratedDescriptor(_class2.prototype, \"reactionOnMessage\", [_dec12], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: null\n}), _descriptor11 = _applyDecoratedDescriptor(_class2.prototype, \"chat\", [_dec13], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: null\n}), _descriptor12 = _applyDecoratedDescriptor(_class2.prototype, \"chatPinned\", [_dec14], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: null\n}), _descriptor13 = _applyDecoratedDescriptor(_class2.prototype, \"chatPinnedForAll\", [_dec15], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: null\n})), _class2)) || _class);\nexport { Message as default };","map":{"version":3,"names":["User","Model","Column","Entity","JoinColumn","ManyToOne","PrimaryGeneratedColumn","Branch","Message","_dec","_dec2","_dec3","eager","cascade","nullable","_dec4","_dec5","_dec6","_dec7","_dec8","_dec9","_dec10","_dec11","default","_dec12","type","_dec13","branch","messages","onDelete","_dec14","pinnedMessage","_dec15","pinnedMessageForAll","_class","_class2","_Model","author","content","massageType","_this","_classCallCheck","_callSuper","_initializerDefineProperty","_descriptor","_descriptor2","_descriptor3","_descriptor4","_descriptor5","_descriptor6","_descriptor7","_descriptor8","_descriptor9","_descriptor10","_descriptor11","_descriptor12","_descriptor13","sendingTime","Date","messageType","_inherits","_createClass","_applyDecoratedDescriptor","prototype","configurable","enumerable","writable","initializer"],"sources":["C:/Users/T480/source/repos/Messenger/Messenger/dao/Models/Message.ts"],"sourcesContent":["import User from './User'\r\nimport { EMessageType } from './EMessageType';\r\nimport IUserReaction from './IUserReaction ';\r\nimport Model from './Model';\r\nimport { Column, Entity, JoinColumn, ManyToOne, PrimaryGeneratedColumn } from 'typeorm';\r\nimport Chat from './Chats/Chat';\r\nimport Branch from './Chats/Branch';\r\n\r\n@Entity()\r\nexport default class Message extends Model {\r\n    constructor(author: User, content: string, massageType: EMessageType) {\r\n        super();\r\n        this.author = author;\r\n        this.content = content;\r\n        this.sendingTime = new Date();\r\n        this.messageType = massageType;\r\n    }\r\n    @PrimaryGeneratedColumn()\r\n    messageId!: number;\r\n\r\n    @ManyToOne(() => User, {\r\n        eager: true,\r\n        cascade: [\"insert\", \"update\"],\r\n        nullable: true,\r\n    })\r\n    @JoinColumn()\r\n    author: User;\r\n\r\n    //Information about message\r\n    @Column('text')\r\n    content!: string;\r\n\r\n    @Column('datetime')\r\n    sendingTime!: Date\r\n\r\n    @Column('integer') //enum\r\n    messageType!: EMessageType;\r\n\r\n    //add BeforeInset() // or after\r\n    @Column('integer', { nullable: true })\r\n    numberInChat: number;\r\n\r\n    @Column('integer', { nullable: true })\r\n    messageResponseId?: number;\r\n\r\n    //user\r\n    @Column('integer', { nullable: true })\r\n    messageForwardId?: number;\r\n\r\n    @Column('boolean', { default: false })\r\n    isEdited: boolean = false;\r\n\r\n    @Column({ type: 'simple-json', nullable: true })\r\n    reactionOnMessage: Array<IUserReaction>;\r\n\r\n    @ManyToOne(() => Branch, (branch) => branch.messages, { onDelete: 'CASCADE' })\r\n    chat!: Branch\r\n\r\n    @ManyToOne(() => Branch, (branch) => branch.pinnedMessage, { onDelete: 'CASCADE', nullable: true })\r\n    chatPinned: Branch\r\n\r\n    @ManyToOne(() => Branch, (branch) => branch.pinnedMessageForAll, { onDelete: 'CASCADE', nullable: true })\r\n    chatPinnedForAll: Branch\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}