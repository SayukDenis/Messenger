{"ast":null,"code":"import React from \"react\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport { mySelfUser } from \"../../1HelpFullFolder/Initialization\";\nimport ViewedMessageIcon from \"./ViewedMessageIcon\";\nimport { listOfChatsStyle } from \"../../Styles/ListOfChatsStyle\";\nimport UnViewedMessage from \"./UnViewedMessage\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar _Dimensions$get = Dimensions.get(\"window\"),\n  screenWidth = _Dimensions$get.width,\n  screenHeight = _Dimensions$get.height;\nvar LastMessageStatus = function LastMessageStatus(_ref) {\n  var _chat$dictionary;\n  var chat = _ref.chat;\n  var lastMessage = chat.listOfMessages[chat.listOfMessages.length - 1];\n  if (!lastMessage) {\n    return null;\n  }\n  var content;\n  var id = (_chat$dictionary = chat.dictionary) == null ? void 0 : _chat$dictionary.get(mySelfUser.id);\n  if (lastMessage.sender === mySelfUser) {\n    if (id && lastMessage.id < id) {\n      content = _jsx(View, {\n        style: listOfChatsStyle.checkMarkercontainerStyle,\n        children: _jsx(UnViewedMessage, {})\n      });\n    } else {\n      content = _jsx(View, {\n        style: listOfChatsStyle.checkMarkercontainerStyle,\n        children: _jsx(ViewedMessageIcon, {\n          stylePosition: listOfChatsStyle.positionOfFirstCheckMarkStyle\n        })\n      });\n    }\n  } else if (id) {\n    var countOfMessage = chat.listOfMessages.length - id;\n    if (countOfMessage === 0) return null;\n    content = CountOfMessages(countOfMessage);\n  }\n  return _jsx(View, {\n    style: listOfChatsStyle.lastMessageStatusContainer,\n    children: content\n  });\n};\nfunction CountOfMessages(countOfMessage) {\n  var containerStyle = listOfChatsStyle.fourCharcontainer;\n  var formatText = formatNumber(countOfMessage);\n  if (formatText.length == 1) containerStyle = listOfChatsStyle.oneCharcontainer;else if (formatText.length == 2) containerStyle = listOfChatsStyle.twoCharcontainer;else if (formatText.length == 3) containerStyle = listOfChatsStyle.threeCharcontainer;else if (formatText.length == 4) containerStyle = listOfChatsStyle.fourCharcontainer;\n  return _jsxs(View, {\n    style: [listOfChatsStyle.countOfUnreadMessagescontainer, containerStyle],\n    children: [_jsx(View, {\n      style: {\n        position: \"absolute\",\n        backgroundColor: \"#FFFFFF\",\n        opacity: 0.6,\n        height: screenHeight,\n        width: screenWidth\n      }\n    }), _jsx(Text, {\n      style: listOfChatsStyle.countOfUnReadMessagesContent,\n      children: formatText\n    })]\n  });\n}\nvar formatNumber = function formatNumber(num) {\n  if (num < 1000) {\n    return num.toString();\n  } else if (num < 100000) {\n    if (num % 1000 !== 0) {\n      var thousands = (num / 1000).toFixed(1);\n      return thousands.endsWith(\".0\") ? thousands.slice(0, -2) + \"K\" : thousands + \"K\";\n    } else {\n      return (num / 1000).toFixed(0) + \"K\";\n    }\n  } else if (num < 1000000) {\n    if (num % 1000 !== 0) {\n      var _thousands = (num / 1000).toFixed(0);\n      return _thousands.endsWith(\".0\") ? _thousands.slice(0, -2) + \"K\" : _thousands + \"K\";\n    } else {\n      return (num / 1000).toFixed(0) + \"K\";\n    }\n  } else if (num < 100000000) {\n    if (num % 1000000 !== 0) {\n      var millions = (num / 1000000).toFixed(1);\n      return millions.endsWith(\".0\") ? millions.slice(0, -2) + \"M\" : millions + \"M\";\n    } else {\n      return (num / 1000).toFixed(0) + \"M\";\n    }\n  } else if (num < 1000000000) {\n    if (num % 1000000 !== 0) {\n      var _millions = (num / 1000000).toFixed(0);\n      return _millions.endsWith(\".0\") ? _millions.slice(0, -2) + \"M\" : _millions + \"M\";\n    } else {\n      return (num / 1000000).toFixed(0) + \"M\";\n    }\n  } else {\n    if (num % 1000000000 !== 0) {\n      var billions = (num / 1000000000).toFixed(1);\n      return billions.endsWith(\".0\") ? billions.slice(0, -2) + \"B\" : billions + \"B\";\n    } else {\n      return (num / 1000000000).toFixed(0) + \"B\";\n    }\n  }\n  return \"0\";\n};\nexport default LastMessageStatus;","map":{"version":3,"names":["React","View","Text","Dimensions","mySelfUser","ViewedMessageIcon","listOfChatsStyle","UnViewedMessage","jsx","_jsx","jsxs","_jsxs","_Dimensions$get","get","screenWidth","width","screenHeight","height","LastMessageStatus","_ref","_chat$dictionary","chat","lastMessage","listOfMessages","length","content","id","dictionary","sender","style","checkMarkercontainerStyle","children","stylePosition","positionOfFirstCheckMarkStyle","countOfMessage","CountOfMessages","lastMessageStatusContainer","containerStyle","fourCharcontainer","formatText","formatNumber","oneCharcontainer","twoCharcontainer","threeCharcontainer","countOfUnreadMessagescontainer","position","backgroundColor","opacity","countOfUnReadMessagesContent","num","toString","thousands","toFixed","endsWith","slice","millions","billions"],"sources":["D:/repo/Messenger/Messenger/Pages/ChatList/Components/List of folders containers/LastMessageStatus.tsx"],"sourcesContent":["import React, { ReactNode } from \"react\";\r\nimport { View, Text, Dimensions, ViewStyle } from \"react-native\";\r\nimport Chat from \"../../1HelpFullFolder/Chat\";\r\nimport Message from \"../../1HelpFullFolder/Message\";\r\nimport { mySelfUser } from \"../../1HelpFullFolder/Initialization\";\r\nimport ViewedMessageIcon from \"./ViewedMessageIcon\";\r\nimport { listOfChatsStyle } from \"../../Styles/ListOfChatsStyle\";\r\nimport UnViewedMessage from \"./UnViewedMessage\";\r\ninterface LastMessageStatusProps {\r\n  chat: Chat;\r\n}\r\nconst { width: screenWidth, height: screenHeight } = Dimensions.get(\"window\");\r\nconst LastMessageStatus: React.FC<LastMessageStatusProps> = ({ chat }) => {\r\n  const lastMessage: Message | undefined =\r\n    chat.listOfMessages[chat.listOfMessages.length - 1];\r\n  if (!lastMessage) {\r\n    return null;\r\n  }\r\n  let content: ReactNode;\r\n  const id: number | undefined = chat.dictionary?.get(mySelfUser.id);\r\n  if (lastMessage.sender === mySelfUser) {\r\n    if (id && lastMessage.id < id) {\r\n      content = (\r\n        <View style={listOfChatsStyle.checkMarkercontainerStyle}>\r\n          <UnViewedMessage/>\r\n        </View>\r\n      );\r\n    } else {\r\n      content = (\r\n        <View style={listOfChatsStyle.checkMarkercontainerStyle}>\r\n          <ViewedMessageIcon\r\n            stylePosition={listOfChatsStyle.positionOfFirstCheckMarkStyle}\r\n          />\r\n        </View>\r\n      );\r\n    }\r\n  } else if (id) {\r\n    let countOfMessage: number = chat.listOfMessages.length - id;\r\n    if (countOfMessage === 0) return null;\r\n    content = CountOfMessages(countOfMessage);\r\n  }\r\n  return (\r\n    <View style={listOfChatsStyle.lastMessageStatusContainer}>{content}</View>\r\n  );\r\n};\r\nfunction CountOfMessages(countOfMessage: number): ReactNode {\r\n  let containerStyle: ViewStyle = listOfChatsStyle.fourCharcontainer;\r\n  let formatText: string = formatNumber(countOfMessage);\r\n  if (formatText.length == 1)\r\n    containerStyle = listOfChatsStyle.oneCharcontainer;\r\n  else if (formatText.length == 2)\r\n    containerStyle = listOfChatsStyle.twoCharcontainer;\r\n  else if (formatText.length == 3)\r\n    containerStyle = listOfChatsStyle.threeCharcontainer;\r\n  else if (formatText.length == 4)\r\n    containerStyle = listOfChatsStyle.fourCharcontainer;\r\n  return (\r\n    <View\r\n      style={[listOfChatsStyle.countOfUnreadMessagescontainer, containerStyle]}\r\n    >\r\n      <View style={{position:\"absolute\",backgroundColor:\"#FFFFFF\",opacity:0.6,height:screenHeight,width:screenWidth}}/>\r\n      <Text style={listOfChatsStyle.countOfUnReadMessagesContent}>\r\n        {formatText}\r\n      </Text>\r\n    </View>\r\n  );\r\n}\r\n\r\nconst formatNumber = (num: number): string => {\r\n  if (num < 1000) {\r\n    return num.toString();\r\n  } else if (num < 100000) {\r\n    if (num % 1000 !== 0) {\r\n      const thousands = (num / 1000).toFixed(1);\r\n      return thousands.endsWith(\".0\")\r\n        ? thousands.slice(0, -2) + \"K\"\r\n        : thousands + \"K\";\r\n    } else {\r\n      return (num / 1000).toFixed(0) + \"K\";\r\n    }\r\n  } else if (num < 1000000) {\r\n    if (num % 1000 !== 0) {\r\n      const thousands = (num / 1000).toFixed(0);\r\n      return thousands.endsWith(\".0\")\r\n        ? thousands.slice(0, -2) + \"K\"\r\n        : thousands + \"K\";\r\n    } else {\r\n      return (num / 1000).toFixed(0) + \"K\";\r\n    }\r\n  } else if (num < 100000000) {\r\n    if (num % 1000000 !== 0) {\r\n      const millions = (num / 1000000).toFixed(1);\r\n      return millions.endsWith(\".0\")\r\n        ? millions.slice(0, -2) + \"M\"\r\n        : millions + \"M\";\r\n    } else {\r\n      return (num / 1000).toFixed(0) + \"M\";\r\n    }\r\n  } else if (num < 1000000000) {\r\n    if (num % 1000000 !== 0) {\r\n      const millions = (num / 1000000).toFixed(0);\r\n      return millions.endsWith(\".0\")\r\n        ? millions.slice(0, -2) + \"M\"\r\n        : millions + \"M\";\r\n    } else {\r\n      return (num / 1000000).toFixed(0) + \"M\";\r\n    }\r\n  } else {\r\n    if (num % 1000000000 !== 0) {\r\n      const billions = (num / 1000000000).toFixed(1);\r\n      return billions.endsWith(\".0\")\r\n        ? billions.slice(0, -2) + \"B\"\r\n        : billions + \"B\";\r\n    } else {\r\n      return (num / 1000000000).toFixed(0) + \"B\";\r\n    }\r\n  }\r\n  return \"0\";\r\n};\r\n\r\nexport default LastMessageStatus;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}