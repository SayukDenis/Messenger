{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport { dataSource } from \"../../local/database\";\nimport Branch from \"../../Models/Chats/Branch\";\nimport Role from \"../../Models/Chats/Role\";\nimport { readRoles } from \"./roleOperations\";\nvar manager = dataSource.manager;\nexport function branchOperations() {\n  return _branchOperations.apply(this, arguments);\n}\nfunction _branchOperations() {\n  _branchOperations = _asyncToGenerator(function* () {\n    var _branch3$branches$at;\n    console.log('\\n\\tBranches start\\n');\n    if (!dataSource.isInitialized) yield dataSource.initialize();\n    var role1 = new Role('name1', 'emoji1');\n    var role2 = new Role('name2', 'emoji2');\n    var role3 = new Role('name3', 'emoji3');\n    var role4 = new Role('name4', 'emoji4');\n    var role5 = new Role('name5', 'emoji5');\n    var role6 = new Role('name6', 'emoji6');\n    yield manager.save([role1, role2, role3, role4, role5, role6]);\n    console.log('Roles have been saved');\n    var internalBranch1 = new Branch('internalBranch1');\n    var internalBranch2 = new Branch('internalBranch2');\n    var internalBranch3 = new Branch('internalBranch3');\n    var internalBranch4 = new Branch('internalBranch4');\n    var internalBranch5 = new Branch('internalBranch5');\n    var internalInternalBranch1 = new Branch('internalInternalBranch1');\n    var internalInternalBranch2 = new Branch('internalInternalBranch2');\n    var branch1 = new Branch('branch1');\n    branch1.branches = [internalBranch1, internalBranch2];\n    branch1.haveAccessRoleId = [role1.roleId, role2.roleId];\n    yield manager.save(branch1);\n    console.log('Branch1 has been saved');\n    var branch2 = new Branch('branch2');\n    branch2.branches = [internalBranch3];\n    branch2.haveAccessRoleId = [role3.roleId, role4.roleId];\n    yield manager.save(branch2);\n    console.log('Branch2 has been saved');\n    var branch3 = new Branch('branch3');\n    branch3.branches = [internalBranch4, internalBranch5];\n    branch3.haveAccessRoleId = [role5.roleId, role6.roleId];\n    internalBranch4.branches = [internalInternalBranch1];\n    yield manager.save(branch3);\n    console.log('Branch3 has been saved');\n    yield readBranches();\n    yield readRoles();\n    branch1.title = 'branch1NewTitle';\n    branch1.linkToPhoto = 'somePhoto1';\n    branch2.title = 'branch2NewTitle';\n    branch2.linkToPhoto = 'somePhoto2';\n    (_branch3$branches$at = branch3.branches.at(0)) == null ? void 0 : _branch3$branches$at.branches.push(internalInternalBranch2);\n    yield manager.save([branch1, branch2, branch3]);\n    console.log('Branches have been updated');\n    yield readBranches();\n    yield readRoles();\n    yield manager.remove([branch1, branch2, branch3]);\n    console.log('Branches have been removed');\n    yield readBranches();\n    yield readRoles();\n  });\n  return _branchOperations.apply(this, arguments);\n}\nexport function readBranches() {\n  return _readBranches.apply(this, arguments);\n}\nfunction _readBranches() {\n  _readBranches = _asyncToGenerator(function* () {\n    var savedBranches = yield manager.find(Branch);\n    console.log(`Branches quantity: ${savedBranches.length}`);\n    for (var branch of savedBranches) {\n      console.log(branch);\n    }\n  });\n  return _readBranches.apply(this, arguments);\n}","map":{"version":3,"names":["dataSource","Branch","Role","readRoles","manager","branchOperations","_branchOperations","apply","arguments","_asyncToGenerator","_branch3$branches$at","console","log","isInitialized","initialize","role1","role2","role3","role4","role5","role6","save","internalBranch1","internalBranch2","internalBranch3","internalBranch4","internalBranch5","internalInternalBranch1","internalInternalBranch2","branch1","branches","haveAccessRoleId","roleId","branch2","branch3","readBranches","title","linkToPhoto","at","push","remove","_readBranches","savedBranches","find","length","branch"],"sources":["C:/Users/T480/source/repos/Messenger/Messenger/dao/test/manualTest/branchOperations.ts"],"sourcesContent":["import { dataSource } from \"../../local/database\";\r\nimport Chat from '../../Models/Chats/Chat';\r\nimport Folder from \"../../Models/Folder\";\r\nimport { readChats } from \"./chatOperations\";\r\nimport Branch from \"../../Models/Chats/Branch\";\r\nimport Role from \"../../Models/Chats/Role\";\r\nimport { readRoles } from \"./roleOperations\";\r\n\r\nconst manager = dataSource.manager;\r\n\r\nexport async function branchOperations() {\r\n\r\n    console.log('\\n\\tBranches start\\n');\r\n\r\n    if (!dataSource.isInitialized) await dataSource.initialize();\r\n\r\n    const role1 = new Role('name1', 'emoji1');\r\n    const role2 = new Role('name2', 'emoji2');\r\n    const role3 = new Role('name3', 'emoji3');\r\n    const role4 = new Role('name4', 'emoji4');\r\n    const role5 = new Role('name5', 'emoji5');\r\n    const role6 = new Role('name6', 'emoji6');\r\n    await manager.save([role1, role2, role3, role4, role5, role6])\r\n    console.log('Roles have been saved')\r\n\r\n\r\n    const internalBranch1 = new Branch('internalBranch1');\r\n    const internalBranch2 = new Branch('internalBranch2');\r\n    const internalBranch3 = new Branch('internalBranch3');\r\n    const internalBranch4 = new Branch('internalBranch4');\r\n    const internalBranch5 = new Branch('internalBranch5');\r\n\r\n    const internalInternalBranch1 = new Branch('internalInternalBranch1');\r\n    const internalInternalBranch2 = new Branch('internalInternalBranch2');\r\n\r\n    //Save\r\n    const branch1 = new Branch('branch1');\r\n    branch1.branches = [internalBranch1, internalBranch2]; //cascade save\r\n    branch1.haveAccessRoleId = [role1.roleId, role2.roleId];\r\n    await manager.save(branch1);\r\n    console.log('Branch1 has been saved')\r\n\r\n    const branch2 = new Branch('branch2');\r\n    branch2.branches = [internalBranch3];  //cascade save\r\n    branch2.haveAccessRoleId = [role3.roleId, role4.roleId];\r\n    await manager.save(branch2);\r\n    console.log('Branch2 has been saved')\r\n\r\n    const branch3 = new Branch('branch3');\r\n    branch3.branches = [internalBranch4, internalBranch5]; //cascade save\r\n    branch3.haveAccessRoleId = [role5.roleId, role6.roleId];\r\n    internalBranch4.branches = [internalInternalBranch1];\r\n    await manager.save(branch3);\r\n    console.log('Branch3 has been saved')\r\n\r\n    //Read\r\n    await readBranches();\r\n    await readRoles();\r\n\r\n    //Update\r\n    branch1.title = 'branch1NewTitle'\r\n    branch1.linkToPhoto = 'somePhoto1'\r\n\r\n    branch2.title = 'branch2NewTitle'\r\n    branch2.linkToPhoto = 'somePhoto2'\r\n    branch3.branches.at(0)?.branches.push(internalInternalBranch2);\r\n\r\n    await manager.save([branch1, branch2, branch3]);\r\n    console.log('Branches have been updated')\r\n\r\n    //Read\r\n    await readBranches();\r\n    await readRoles();\r\n\r\n    //Remove\r\n    await manager.remove([branch1, branch2, branch3]); //cascade remove\r\n    console.log('Branches have been removed')\r\n\r\n    //Read\r\n    await readBranches();\r\n    await readRoles();\r\n}\r\n\r\nexport async function readBranches() {\r\n    const savedBranches = await manager.find(Branch);\r\n    console.log(`Branches quantity: ${savedBranches.length}`);\r\n    for (let branch of savedBranches) {\r\n        console.log(branch);\r\n    }\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}